# Data

```{r, echo = FALSE, message = FALSE}
source(here::here("scripts/setup.R"))
```
__TO DO's__

* Sources - TBS
* Description - In progress
* Wrangling/cleaning - In progress
* Spotting mistakes and missing data (could be part of EDA too) - TBD
* Listing anomalies and outliers (could be part of EDA too) - TBD


## Sources

## Description

The datasets encompass:

- **Vehicle Registrations**: Detailed regional breakdowns showing vehicle type, fuel type, and numbers across years.
- **Google Trends**: Time-series data showcasing the interest in electric vehicles and environmental topics over time.
- **Oil Prices**: Time-series data indicating Brent oil price fluctuations over the years.
- **Demographics**: Indicators like population growth, immigration, emigration, gender statistics, and more, which can influence vehicle adoption patterns.

## Wrangling/Cleaning
###Load data
```{r}
# Reading the data
vehicle_data_2005_2008 <- read.csv("../data/road_vehicle_CH_2005-2008.csv")
vehicle_data_2009_2022 <- read.csv("../data/road_vehicle_CH_2009-2022.csv")
google_trends_data <- read.csv("../data/google_trend_EV_2004-2023.csv")
oil_prices_data <- read.csv("../data/BrentOilPrices.csv")
demographic_data <- read.csv("../data/demographic.csv")
```

```{r}
# Storing the data frames in a list
datasets <- list(vehicle_data_2005_2008 = vehicle_data_2005_2008,
                 vehicle_data_2009_2022 = vehicle_data_2009_2022,
                 google_trends_data = google_trends_data,
                 oil_prices_data = oil_prices_data,
                 demographic_data = demographic_data)

# Iterating over the list and printing the head of each data frame
for (i in names(datasets)) {
  cat(paste("\nFirst few rows of dataset:", i, "\n"))
  print(head(datasets[[i]]))
  print(str(datasets[[i]]))
}
```
```{r}
# Reshape the dataset from wide to long format
data_long <- data |>
  pivot_longer(cols = `2005`:`2008`, names_to = "Year", values_to = "Count")

# Rename columns to match your specifications
data_cleaned <- data_long |>
  rename(
    Location = Canton,
    Type = `Vehicle group`,
    Fuel = Fuel,
    Date = Month
  )

# Display the cleaned dataset
head(data_cleaned)
```


- **Merging and Joining**: As the vehicle data was split across multiple files, it was necessary to combine them for a holistic view.
```{r}
# did not work:
#vehicle_data <- rbind(vehicle_data_2005_2008, vehicle_data_2009_2022)
```

- **Handling Missing Values**: Some datasets contained missing values which were either filled using appropriate imputation methods or dropped based on their significance.
- **Data Type Conversions**: Ensuring that all data columns were of the correct type (e.g., converting date strings to date objects).



## Spotting Mistakes and Missing Data

## Listing Anomalies and Outliers
